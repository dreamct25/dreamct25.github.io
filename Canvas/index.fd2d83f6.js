function e(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function t(t){for(var r=1;r<arguments.length;r++){var o=null!=arguments[r]?arguments[r]:{},s=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(o).filter((function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable})))),s.forEach((function(r){e(t,r,o[r])}))}return t}const r=(r=>{const o=e=>{const t=r.call(r,e)||e;return t.texts=e=>e?t.textContent=e:t.textContent,t.html=e=>e?t.innerHTML=e:t.innerHTML,t.addClass=e=>(t.classList.add(e),t),t.removeClass=e=>(t.classList.remove(e),t),t.toggleClass=e=>t.classList.toggle(e),t.on=(e,r)=>{t[["on",e].join("")]=e=>r.call(r,t,e)},t.listener=(e,r)=>t.addEventListener(e,r),t.removeListener=(e,r)=>t.removeEventListener(e,r),t.val=e=>e?t.value=e:t.value,t.attr=(e,r)=>r?t.setAttribute(e,r):t.getAttribute(e),t.props=(e,r)=>r?t[e]=r:t[e],t.sibling=e=>t[e],t.child=e=>t.children[e],t.childFirst=()=>t.firstElementChild,t.childLast=()=>t.lastElementChild,t.parent=()=>t.parentNode,t.appendDom=e=>t.append(e),t.removeDom=()=>t.remove(),t.removeChildDom=()=>t.replaceChildren(),t.appendDomText=e=>t.appendChild(e),t.easyAppendDom=(e,r)=>t.insertAdjacentHTML("afterDom"!==e?"afterbegin":"beforeend",r),t.styles=(e,r,s)=>{if(o.includes(["set","remove"],e))return"set"===e?t.style.setProperty(r,s):t.style.removeProperty(r),t;o.console("error","First parameter method must use string and keyword is 'set' or 'remove'.")},t.getDomStyles=e=>{const r={};if("object"!=typeof e)o.console("error","Parameter must use array.");else{if(0!==e.length)return o.each(e,(e=>r[e]=getComputedStyle(t).getPropertyValue(e))),r;o.console("error","Parameter must use array,and css property must in array with string.")}return r},t.getDomPos=()=>({x:t.props("offsetLeft"),y:t.props("offsetTop")-window.scrollY,top:t.props("offsetTop")-window.scrollY,left:t.props("offsetLeft"),right:t.props("offsetLeft")+t.props("offsetWidth"),bottom:t.props("offsetTop")+t.props("offsetHeight")-window.scrollY,width:t.props("offsetWidth"),height:t.props("offsetHeight")}),t.scrollToTop=(e={scrollTop:0,duration:0})=>{let r;const[o,s]=Object.keys(e),n=t[o],a=e[o]-n,l=+new Date;(r=()=>{const i=+new Date-l;t.scrollTop=Number((e=>{const{currentTime:t,startVal:r,changeVal:o,animateDuration:s}=e;let n=t;return n/=s/2,n<1?o/2*n*n+r:(n-=1,-o/2*(n*(n-2)-1)+r)})({currentTime:i,startVal:n,changeVal:a,animateDuration:e[s]})),i<e[s]?requestAnimationFrame(r):t.scrollTop=e[o]})()},t.useWillMount=e=>{"object"==typeof t&&o.typeOf(t,"HTMLDocument")?t.listener("readystatechange",(({target:t})=>"interactive"===t.readyState&&e.call(e,t))):o.console("error","UseWillMount hook just use when selector document.")},t.useMounted=e=>{"object"==typeof t&&o.typeOf(t,"HTMLDocument")?t.listener("readystatechange",(({target:t})=>"complete"===t.readyState&&e.call(e,t))):o.console("error","UseMounted Hook just use when selector document.")},t};o.each=(e,t)=>e.forEach(((e,r)=>t.call(t,e,r))),o.maps=(e,t)=>e.map(((e,r)=>t.call(t,e,r))),o.filter=(e,t)=>e.filter((e=>t.call(t,e))),o.find=(e,t)=>e.find((e=>t.call(t,e))),o.sort=(e,t)=>e.sort(((e,r)=>t.call(t,e,r))),o.sum=(e,t,r)=>r?e.reduce(((e,r)=>t.call(t,e,r)),r):e.reduce(((e,r)=>t.call(t,e,r))),o.indexOf=(e,t)=>e.indexOf(t),o.includes=(e,t)=>e.includes(t),o.findIndexOfObj=(e,t)=>e.findIndex((e=>t.call(t,e))),o.findObjProperty=(e,t)=>e.hasOwnProperty(t),o.mergeArray=(e,t,r)=>r?e.concat(t):r.call(r,e.concat(t)),o.typeOf=(e,t)=>t?e.constructor.name===t:e.constructor.name,o.console=(e,...t)=>console[e](...t),o.localData=(e,t,r)=>"get"===e?o.convert(localStorage.getItem(t),"json")||[]:localStorage.setItem(t,o.convert(r,"stringify")),o.getNumberOfDecimal=(e,t)=>parseInt(e.toFixed(t)),o.createCustomEvent=(e,t)=>t?new CustomEvent(e,{detail:t}):new CustomEvent(e),o.registerCustomEvent=(e,t)=>window.addEventListener(e,t),o.useCustomEvent=e=>window.dispatchEvent(e),o.removeCustomEvent=(e,t)=>window.removeEventListener(e,t),o.createPromise=e=>new Promise(((t,r)=>e.call(e,t,r))),o.createPromiseAll=(...e)=>Promise.all(e),o.createDomText=e=>document.createTextNode(e),o.objDetails=(e,t)=>void 0!==t&&o.includes(["keys","values","entries"],t)?Object[t](e):o.console("error","please enter secode prameter 'keys' or 'values' or 'entries' in type string"),o.createArray=({type:e,item:t},r)=>{if("fake"===e){if("random"in t&&o.typeOf(t.random,"Number")&&void 0!==r&&o.typeOf(r,"Function"))return Array.from({length:t.random},((e,t)=>r.call(r,t)));o.console("error","item property must have random in object and radom type must be number,with call back function in secode parameters.")}else if("new"===e&&!("random"in t))return Array.from(t)},o.convert=(e,t)=>{if(void 0===e||void 0===t)return void o.console("error","Please enter first parameters value who want to convert and seconde paramters value is convert type 'string' or 'number' or 'float' or 'boolean' or 'json' or 'stringify'.");if("object"==typeof e&&o.includes(["string","number","float","boolean"],t))return void o.console("error",`Convert value can't be object when use convert type ${t}.`);return{string:String(e),number:parseInt(e),float:parseFloat(e),boolean:Boolean(e),json:"json"===t&&JSON.parse(e),stringify:"stringify"===t&&JSON.stringify(e)}[t]},o.createDom=(e,t)=>{const r=document.createElement(e),s=Object.entries(t);return o.each(s,(e=>{const[t,s]=e;if(o.typeOf(s,"Object")){const[t,o]=e,[[s,n]]=Object.entries(o);r[t][s]=n}else r[t]=o.typeOf(s,"String")?s.trim():s})),r},o.currencyTranser=(e,t)=>{if(void 0!==e){const r=""===e?{}:{style:"currency",currency:e};return new Intl.NumberFormat(""===e?"TWN":e,r).format(t)}o.console("error","First argument currency type is must.")},o.formatDateTime=e=>{if(!("formatDate"in e)&&!("formatType"in e))return void o.console("error","Please enter an object and use formatType property in the object.");if(o.findObjProperty(e,"customWeekItem")){if("Array"!==o.typeOf(e.customWeekItem))return void o.console("error","customWeekItem property Must use array.");if(e.customWeekItem.length<=6||e.customWeekItem.length>7)return void o.console("error","customWeekItem property must put seven days name of week in array.");e.customWeekItem=[e.customWeekItem[e.customWeekItem.length-1],...e.customWeekItem],e.customWeekItem.pop()}const t=36e5*("localCountryTime"in e?e.localCountryTime||0:8),r=new Date(+new Date(e.formatDate)+t).toJSON().replace(/T/g,"-").replace(/:/g,"-").split(".")[0].split("-"),[s,n,a,l,i,c]=r;if("toDateFullNumber"in e)return o.convert(r.join(""),"number");if(e.formatType.match("tt")){const t=o.convert(l,"number")>11?"PM":"AM",r=o.convert(l,"number")-12<10?"0"+(o.convert(l,"number")-12):o.convert(o.convert(l,"number")-12,"string");return e.formatType.replace(/yyyy/g,s).replace(/MM/g,n).replace(/dd/g,a).replace(/HH/g,r).replace(/mm/g,i).replace(/ss/g,c).replace(/tt/g,t)}return o.findObjProperty(e,"customWeekItem")?{fullDateTime:e.formatType.replace(/yyyy/g,s).replace(/MM/g,n).replace(/dd/g,a).replace(/HH/g,l).replace(/mm/g,i).replace(/ss/g,c),getWeekName:e.customWeekItem[new Date(+new Date(e.formatDate)).getDay()]}:e.formatType.replace(/yyyy/g,s).replace(/MM/g,n).replace(/dd/g,a).replace(/HH/g,l).replace(/mm/g,i).replace(/ss/g,c)};class s{static async fetchSetting(e,r){const s={},{method:n,headers:a,contentType:l,returnType:i,data:c,routeParams:u,beforePost:p,successFn:d,excuteDone:m,errorFn:y}=e;s.method=n,e.url=this.baseUrl?`${this.baseUrl}${e.url}`:e.url;const f=i||"json";if(!n)return void o.console("error","Property name method is required in obejct parameters.");if(!o.includes(["get","post","patch","put","delete"],n.toLocaleLowerCase()))return void o.console("error","Method value must use valid request method,like get、post ...");if(u){const[t]=o.objDetails(u,"keys");e.url=`${e.url}/${u[t]}`}if((o.objDetails(this.baseHeaders,"keys").length>0||a&&o.objDetails(a,"keys").length>0)&&(s.headers=o.objDetails(this.baseHeaders,"keys").length>0?this.baseHeaders:t({"Content-Type":"application/json"},a)),c&&(s.headers=o.objDetails(this.baseHeaders,"keys").length>0?this.baseHeaders:{"Content-Type":l||"application/json"},s.body=o.convert(c,"stringify")),(o.objDetails(this.baseHeaders,"keys").length>0||a)&&c&&(s.headers=o.objDetails(this.baseHeaders,"keys").length>0?this.baseHeaders:t({},a),s.body=o.convert(c,"stringify")),!r){if(p&&p.call(p),!d)return void o.console("error","Function Name successFn is required in obejct parameters.");if(!y)return void o.console("error","Function Name errorFn is required in obejct parameters.")}const h=await fetch(e.url,s);if(r)return new Promise((async(e,t)=>{if(h.status>=200&&h.status<400){const t=await h[f]();return e({bodyUsed:h.bodyUsed,headers:h.headers,ok:h.ok,redirected:h.redirected,status:h.status,statusText:h.statusText,type:h.type,url:h.url,data:t})}t({bodyUsed:h.bodyUsed,headers:h.headers,ok:h.ok,redirected:h.redirected,status:h.status,statusText:h.statusText,type:h.type,url:h.url})}));try{if(!(h.status>=200&&h.status<400))throw new Error(JSON.stringify({bodyUsed:h.bodyUsed,headers:h.headers,ok:h.ok,redirected:h.redirected,status:h.status,statusText:h.statusText,type:h.type,url:h.url}));{const e=await h[f]();null==d||d.call(d,{bodyUsed:h.bodyUsed,headers:h.headers,ok:h.ok,redirected:h.redirected,status:h.status,statusText:h.statusText,type:h.type,url:h.url,data:e}),m&&m.call(m)}}catch(e){null==y||y.call(y,JSON.parse(e.message))}}static createBase({baseUrl:e,baseHeaders:t}){this.baseUrl=e,this.baseHeaders=t}}e(s,"baseUrl",""),e(s,"baseHeaders",{});class n extends s{}n.get=(e,r)=>n.fetchSetting(t({method:"get",url:e},r),!0),n.post=(e,r)=>n.fetchSetting(t({method:"post",url:e},r),!0),n.patch=(e,r)=>n.fetchSetting(t({method:"patch",url:e},r),!0),n.put=(e,r)=>n.fetchSetting(t({method:"put",url:e},r),!0),n.delete=(e,r)=>n.fetchSetting(t({method:"delete",url:e},r),!0);return o.fetch=e=>s.fetchSetting(e,!1),o.fetch.get=(e,t)=>n.get(e,t),o.fetch.post=(e,t)=>n.post(e,t),o.fetch.patch=(e,t)=>n.patch(e,t),o.fetch.put=(e,t)=>n.put(e,t),o.fetch.delete=(e,t)=>n.delete(e,t),o.fetch.createBase=e=>s.createBase(e),o})((e=>"object"==typeof e?e:document.querySelectorAll(e).length>1?document.querySelectorAll(e):document.querySelector(e)));String.prototype.appendText=function(e){return this.toString()+e},String.prototype.format=function(e,...t){if(r.typeOf(e,"String")&&r.includes(e,"{")&&r.includes(e,"}")){if(e.split("{").join("").split("}").length-1===t.length){let o=e;const s=r.maps(t,((e,t)=>({replaceKey:`{${t}}`,replaceValue:e})));return r.maps(s,(({replaceKey:e,replaceValue:t})=>(o=o.replace(e,t),o))).slice(s.length-1,s.length).join("")}r.console("error","Can't not find else aguments.")}else r.console("error","First paramter must use type string,if use string must like this ex：abc {0} efg {1}.")},Date.prototype.calculateDay=function(e){if(void 0!==e&&"day"in e&&"method"in e)if("number"==typeof e.day){if(r.includes(["addDay","reduceDay"],e.method))return{addDay:new Date(+this+864e5*e.day),reduceDay:new Date(+this-864e5*e.day)}[e.method];r.console("error","Please enter method type 'addDay' or 'reduceDay'.")}else r.console("error","day property must use type number.");else r.console("error","Please enter an object and use day and method property in the object.")},Date.prototype.toOptionTimeZoneForISO=function(e){return new Date(+this+36e5*(e||8)).toISOString()},Array.prototype.append=function(e){this.push(e)},Array.prototype.appendFirst=function(e){return this.unshift(e),this},Array.prototype.remove=function(e){return this.splice(e,1),this},Array.prototype.range=function(e,t){return this.slice(e,t)},Array.prototype.removeFirst=function(){return this.shift(),this},Array.prototype.removeLast=function(){return this.pop(),this},Map.prototype.append=function(e,t){this.set(e,t)},Map.prototype.getValue=function(e){return this.get(e)},Map.prototype.deleteKeyValue=function(e){return this.delete(e)},Map.prototype.removeAll=function(){this.clear()},Map.prototype.isKeyInMap=function(e){return this.has(e)},Map.prototype.toObject=function(){return Object.fromEntries(this)},Set.prototype.append=function(e){this.add(e)},Set.prototype.deleteValue=function(e){return this.delete(e)},Set.prototype.isValueInSet=function(e){return this.has(e)},Set.prototype.removeAll=function(){this.clear()},Set.prototype.toArray=function(){return[...this]},Object.prototype.toMap=function(e){return new Map(Object.entries(e))};var o=r;const s=o(".draw");let n,a=s.getContext("2d"),l=0,i=0,c=!1,u=5;const p=()=>{a.lineWidth=.5*parseInt(o(".line-change").val()),a.strokeStyle=o(".color-panel").val(),a.globalAlpha=parseFloat((1-parseInt(o(".opacity-change").val())/100).toFixed(2)),o(".color-text").texts(o(".color-panel").val()),o(".color-text").styles("set","color",o(".color-panel").val()),o(".line-text").texts(o(".line-change").val()),o(".opacity-text").texts(o(".opacity-change").val()),o.each(o(".cap-options .btn"),(e=>{const t=o.includes(o(e).attr("class"),"active"),r=o(e).texts().toLowerCase();t&&(a.lineCap=r,a.lineJoin=r)}))},d=()=>{o(s).removeListener("mousedown",f),o(s).removeListener("mousemove",h),o(s).listener("mousemove",y),o(s).listener("mouseup",m)},m=()=>{o(s).removeListener("mousemove",y),o(s).removeListener("mouseup",m),o(s).listener("mousedown",f),o(s).listener("mousemove",h),o(s).listener("mouseup",g)},y=({offsetX:e,offsetY:t})=>{a.clearRect(e-15,t-15,30,30)},f=({offsetX:e,offsetY:t})=>{c=!0,[l,i]=[e,t]},h=({offsetX:e,offsetY:t})=>{c&&(a.beginPath(),a.moveTo(l,i),a.lineTo(e,t),a.stroke(),[l,i]=[e,t])},g=()=>c=!1,b=({target:e})=>{const{className:t,value:r}=e;if("color-panel"===t&&(a.strokeStyle=r,o(".color-text").texts(r),o(".color-text").styles("set","color",r),o(".header").styles("set","opacity",r),o(".footer-text").styles("set","opacity",r)),"line-change"===t&&(a.lineWidth=.5*parseInt(r),o(".line-text").texts(r)),"opacity-change"===t){const e=(1-parseInt(r)/100).toFixed(2);a.globalAlpha=parseFloat(e),o(".opacity-text").texts(r),o(".header").styles("set","opacity",parseFloat(e).toString()),o(".footer-text").styles("set","opacity",parseFloat(e).toString())}};o(document).useMounted((()=>{o(".header").addClass("header-in"),setTimeout((()=>o(s).addClass("draw-in")),1e3),setTimeout((()=>o(".footer-text").addClass("footer-text-in")),2e3),setTimeout((()=>{o(".modal").addClass("modal-show"),o(".count").texts(u.toString()),n=setInterval((()=>{if(0===u)return clearInterval(n),void o(".modal").removeClass("modal-show");u--,o(".count").texts(u.toString())}),1e3)}),3e3),p(),o(s).listener("mousedown",f),o(s).listener("mousemove",h),o(s).listener("mouseup",g),o(".line-change").listener("input",b),o(".opacity-change").listener("input",b),o(".color-panel").listener("change",b),o.each(o(".cap-options .btn"),((e,t)=>o(e).listener("click",(({target:e})=>{a.lineCap=o(e).texts().toLowerCase(),o.each(o(".cap-options .btn"),((e,r)=>o(e)[t===r?"addClass":"removeClass"]("active")))})))),o(".eraser-text").listener("click",(({target:e})=>{const t="ON"===o(e).texts();o(s)[t?"removeListener":"listener"]("mousedown",d),o(e)[t?"removeClass":"addClass"]("active"),o(e).texts(t?"OFF":"ON")})),o(".tools").listener("click",(({target:e})=>{o(".float-bar").toggleClass("active"),o(e).toggleClass("active")})),o(".full-panel").listener("click",(({target:e})=>{const t=o.includes(o(".draw").attr("class").split(" "),"full");o(".draw").attr("width",t?1366:window.innerWidth),o(".draw").attr("height",t?768:window.innerHeight),o(".draw")[t?"removeClass":"addClass"]("full"),o(e)[t?"removeClass":"addClass"]("active"),p()})),o(".clear").listener("click",(()=>a.clearRect(0,0,s.width,s.width)))}));