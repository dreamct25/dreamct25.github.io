<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculator</title>
    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous" />
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
</head>
<style type="text/css">
    body {
        font-family: 微軟正黑體;
        background: linear-gradient(120deg, rgb(0, 0, 0), rgba(0, 0, 0, .9), rgba(0, 0, 0, .8), rgba(0, 0, 0, .7));
        background-repeat: no-repeat;
    }
    
    .wrap {
        max-width: 960px;
        margin: 0 auto;
    }
    
    .container {
        padding-bottom: 290px;
    }
    
    .col {
        display: flex;
        flex-direction: row;
        justify-content: center;
    }
    
    .container {
        display: flex;
        justify-content: center;
    }
    
    .main {
        width: 300px;
        margin-top: -100px;
        background: linear-gradient(120deg, rgb(0, 0, 0), rgba(20, 20, 20), rgba(40, 40, 40), rgba(60, 60, 60));
        border-radius: 10px;
        box-shadow: 0 0 12px rgba(255, 255, 255, .7);
        opacity: 1;
        transition: 1s ease;
        transform: translateY(0px);
    }
    
    .main-close {
        transform: translateY(-275px);
        opacity: 0;
        transition: 1s ease;
    }
    
    .display {
        width: 330px;
        color: white;
        background-color: rgb(60, 60, 60);
        text-align: right;
        padding: 56px 10px 56px 0;
        border-radius: 10px 10px 0 0;
        overflow: hidden;
        position: relative;
    }
    
    .displays {
        display: block;
        background: transparent;
        width: 330px;
        color: white;
        font-size: 35px;
        position: absolute;
        top: 20px;
        left: -50px;
        transform: translateY(70px);
        transition: 1s ease;
        opacity: 0;
    }
    
    .btn,
    .btn-another,
    .btns {
        width: 85px;
        height: 66px;
        color: white;
        background-color: rgb(40, 40, 40);
        font-size: 35px;
        text-align: center;
        padding-top: 17px;
        transition: .7s ease;
        cursor: pointer;
        user-select: none;
    }
    
    .btn-effect {
        background-color: transparent;
        transition: .7s ease;
        box-shadow: 0 0 20px rgba(255, 255, 255, .7);
    }
    
    .equal {
        border-radius: 0 0 7px 0;
    }
    
    .zero {
        border-radius: 0 0 0 10px;
    }
    
    .font-displayOn {
        transform: translateY(12px);
        opacity: 1;
        transition: 1s ease;
    }
    
    .powerLink {
        background: white;
        color: rgb(40, 40, 40);
        border-radius: 0;
        transform: scale(1);
        transition: .7s ease;
        box-shadow: 0 0 5px rgba(255, 255, 255, .7);
    }
    
    .icon {
        width: 18px;
        height: 18px;
        border-radius: 50%;
        font-size: 10px;
        text-align: center;
        color: white;
        margin-right: 5px;
        padding-top: 1px;
        position: relative;
        box-shadow: 0 0 12px rgba(0, 0, 0, .7);
    }
    
    .col-icon {
        display: flex;
        position: absolute;
        top: 8px;
        left: 8px;
    }
    
    .close {
        cursor: pointer;
    }
    
    .closed {
        opacity: 1;
        cursor: pointer;
    }
    
    @media screen and (max-width: 320px) {
        .displays {
            left: -50px;
        }
    }
    
    .disappear {
        opacity: 0;
        transform: translateY(0px);
        transition: 1s ease;
        cursor: pointer;
        display: block;
        padding: 2px 1px 0 1px;
        margin-right: 0px;
    }
    
    .appear {
        opacity: 1;
        transform: translateY(175px) scale(3);
        backface-visibility: hidden;
        transition: 1.5s ease;
    }
    
    .disappear:hover {
        transform: translateY(175px) scale(1)rotate(-200deg);
        transition: 1s ease;
    }
    
    .back-tital {
        opacity: 0;
        text-align: center;
        transform: translateY(270px);
        transition: all 1s;
    }
    
    .back-titalChange {
        opacity: 1;
        transform: translateY(155px);
        transition: all 1s;
    }
    
    .back-alert {
        opacity: 1;
        text-align: center;
        transform: translateY(290px);
        transition: 1s ease;
    }
    
    .back-alertOf {
        opacity: 0;
        transform: translateY(390px);
        transition: 1s ease;
    }
    
    .back-icon {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -46%);
    }
</style>

<body>
    <div class="wrap">
        <h1 style="text-align: center; margin: 56px auto;color: white;">Calculator</h1>
        <h2 class="back-tital" style="color:rgba(255, 255, 255, .7)">Go back !</h2>
        <h3 class="back-alert" style="color:rgba(255, 255, 255, .7)">Try to click this button !</h3>
        <div class="icon disappear back-alertck back-again" style="background: rgb(22, 187, 0); margin: 0 auto;padding: 3px;">
            <i class="fal fa-undo back-icon"></i>
        </div>
        <div class="container">
            <div class="main">
                <div class="row">
                    <div class="col">
                        <div class="display">
                            <div class="row">
                                <div class="col-icon">
                                    <div class="icon close open" style="background: rgb(187, 0, 0);"><i class="fal fa-times" style="position: absolute;top: 50%;left: 50%; transform: translate(-53%,-46%);"></i></div>
                                    <div class="icon" style="background: rgb(209, 178, 0);"><i class="fal fa-minus" style="position: absolute;top: 50%;left: 50%;transform: translate(-53%,-46%);"></i></div>
                                    <div class="icon" style="background: rgb(42, 211, 0);"><i class="fal fa-expand-alt" style="position: absolute;top: 50%;left: 50%;transform: translate(-53%,-46%);"></i></div>
                                </div>
                            </div>
                            <span class="displays">0</span>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col">
                        <div class="btn-another power"><i class="fal fa-power-off"></i></div>
                        <div class="bts btn-another ac">AC</div>
                        <div class="bts btn-another back"><i class="fas fa-backspace"></i></div>
                        <div class="bts btns count" data-math="/">&divide;</div>
                    </div>
                </div>
                <div class="row">
                    <div class="col">
                        <div class="bts btn">7</div>
                        <div class="bts btn">8</div>
                        <div class="bts btn">9</div>
                        <div class="bts btns count" data-math="*">&times;</div>
                    </div>
                </div>
                <div class="row">
                    <div class="col">
                        <div class="bts btn">4</div>
                        <div class="bts btn">5</div>
                        <div class="bts btn">6</div>
                        <div class="bts btns count" data-math="-">&ndash;</div>
                    </div>
                </div>
                <div class="row">
                    <div class="col">
                        <div class="bts btn">1</div>
                        <div class="bts btn">2</div>
                        <div class="bts btn">3</div>
                        <div class="bts btns count" data-math="+">+</div>
                    </div>
                </div>
                <div class="row">
                    <div class="col">
                        <div class="bts btn zero" style="width: 170px;">0</div>
                        <div class="bts btn smpoint" style="padding-top: 7px; padding-bottom: 9px;" data-type=".">.</div>
                        <div class="bts equal btns count" data-math="=">=</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script>
        $(document).ready(function() {
            $('.bts').click(function() {
                $(this).addClass('btn-effect')
                setTimeout(function() {
                    $('.bts').removeClass('btn-effect')
                }, 400)
            })
            $('.power').click(function() {
                $('.displays').toggleClass('font-displayOn')
            })
            $('.power').click(function() {
                $(this).toggleClass('powerLink')
            })
            $('.close').click(function() {
                $('.main').addClass('main-close')
            })
            $('.open').click(function() {
                $('.disappear').addClass('appear')
            })
            $('.disappear').mouseenter(function() {
                $('.back-tital').addClass('back-titalChange')
            })
            $('.disappear').click(function() {
                setTimeout(function() {
                    $('.back-tital').removeClass('back-titalChange')
                    $('.disappear').removeClass('appear')
                    $('.back-alert').removeClass('back-alertOf')
                }, 1500)
            })
            $('.back-alertck').mouseenter(function() {
                $('.back-alert').addClass('back-alertOf')
            })
            $('.back-again').click(function() {
                $('.main').removeClass('main-close')
            })
        });
        let btnZero = document.querySelector('.zero');
        let btnSmpoint = document.querySelector('.smpoint');
        let viewer = document.querySelector('.displays');
        let btnAC = document.querySelector('.ac');
        let btnBack = document.querySelector('.back');
        let btnNum = document.querySelectorAll('.btn');
        let btnCount = document.querySelectorAll('.count');
        let stayArry = [];
        let stayValue;
        let displayDF = '0';
        viewer.addEventListener('change', function() {
                setInterval(console.log(viewer.textContent))
            })
            // 使用for迴圈監聽數字按鈕
        let getNum = function(e) {
            let stayNum = e.target.innerText;
            if (displayDF === '0') {
                displayDF = '';
            }
            displayDF += stayNum
            viewer.innerText = displayDF
        };

        for (let i = 0; i < btnNum.length; i++) {
            btnNum[i].addEventListener('click', getNum, false)
        };
        // 使用for迴圈監聽運算式符號按鈕
        let getCount = function(e) {
            let countIng = e.target.dataset.math;
            let stayNum = e.target.innerText;
            if (countIng == '+') {
                stayValue = displayDF;
                displayDF = '0';
                viewer.innerText = displayDF;
                stayArry.push(stayValue);
                stayArry.push('+')
            } else if (countIng == '-') {
                stayValue = displayDF;
                displayDF = '0';
                viewer.innerText = displayDF;
                stayArry.push(stayValue);
                stayArry.push('-')
            } else if (countIng == '*') {
                stayValue = displayDF;
                displayDF = '0';
                viewer.innerText = displayDF;
                stayArry.push(stayValue);
                stayArry.push('*')
            } else if (countIng == '/') {
                stayValue = displayDF;
                displayDF = '0';
                viewer.innerText = displayDF;
                stayArry.push(stayValue);
                stayArry.push('/')
            } else if (countIng == '=') {
                stayArry.push(displayDF);
                var total = eval(stayArry.join(' '));
                displayDF = total + '';
                viewer.innerText = displayDF;
                stayArry = [];
            }
        }

        for (let i = 0; i < btnCount.length; i++) {
            btnCount[i].addEventListener('click', getCount, false)
        };
        // 開關機鍵將數字規 0
        document.querySelector('.power').addEventListener('click', function() {
                setTimeout(function() {
                    displayDF = '0';
                    stayValue = undefined;
                    stayArry = [];
                    viewer.innerText = displayDF;
                }, 1000)
            })
            // 使用undefind，配合空陣列將內部數字清除
        btnAC.addEventListener('click', function() {
                displayDF = '0';
                stayValue = undefined;
                stayArry = [];
                viewer.innerText = displayDF;
            }, false)
            // 使用slice將內部數字長度-1
        btnBack.addEventListener('click', function() {
            let backContent = displayDF.length;
            displayDF = displayDF.slice(0, backContent - 1);
            if (displayDF === '') {
                displayDF = '0';
            };
            viewer.innerText = displayDF;
        }, false);
        // 使用includes判斷內部値是否有無小數點，如果沒有就加上它
        btnSmpoint.addEventListener('click', function(e) {
            if (!displayDF.includes('.')) {
                displayDF += '.';
            };
            viewer.innerText = displayDF;
        }, false)
    </script>
</body>

</html>