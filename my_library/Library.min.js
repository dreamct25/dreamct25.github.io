// © CopyRight 2021-08 - 2023-08 Alex Chen. Library Language - Javascript Ver 1.6.0 Min
// Work Environment Javascript ES6 or latest、ESlint v8.47.0

/* eslint-disable no-return-assign */
/* eslint-disable no-prototype-builtins */
/* eslint-disable promise/param-names */
/* eslint-disable prefer-promise-reject-errors */
/* eslint-disable no-async-promise-executor */
"use strict";const $=(e=>{let t=r=>{let o=e.call(e,r)||r;return o.texts=e=>{if(!e)return o.textContent;o.textContent=e},o.html=e=>{if(!e)return o.innerHTML;o.innerHTML=e},o.addClass=e=>(o.classList.add(e),o),o.removeClass=e=>(o.classList.remove(e),o),o.toggleClass=e=>o.classList.toggle(e),o.on=(e,t)=>{o[["on",e].join("")]=()=>t.call(t,o)},o.listener=(e,t)=>o.addEventListener(e,t),o.removeListener=(e,t)=>o.removeEventListener(e,t),o.val=e=>{if(!e)return o.value;o.value=e},o.attr=(e,t)=>t?o.setAttribute(e,t):o.getAttribute(e),o.props=(e,t)=>t?o[e]=t:o[e],o.sibling=e=>o[e],o.child=e=>o.children[e],o.childFirst=()=>o.firstElementChild,o.childLast=()=>o.lastElementChild,o.parent=()=>o.parentNode,o.appendDom=e=>o.append(e),o.removeDom=()=>o.remove(),o.removeChildDom=()=>o.replaceChildren(),o.appendDomText=e=>o.appendChild(e),o.easyAppendDom=(e,t)=>o.insertAdjacentHTML("afterDom"!==e?"afterbegin":"beforeend",t),o.styles=(e,r,s)=>{if(!t.includes(["set","remove"],e)){t.console("error","First parameter method must use string and keyword is 'set' or 'remove'.");return}return"set"===e?o.style.setProperty(r,s):o.style.removeProperty(r),o},o.getDomStyles=e=>{let r={};return"object"!=typeof e?t.console("error","Parameter must use array."):0===e.length?t.console("error","Parameter must use array,and css property must in array with string."):t.each(e,e=>r[e]=getComputedStyle(o).getPropertyValue(e)),r},o.getDomPos=()=>({x:o.props("offsetLeft"),y:o.props("offsetTop")-window.scrollY,top:o.props("offsetTop")-window.scrollY,left:o.props("offsetLeft"),right:o.props("offsetLeft")+o.props("offsetWidth"),bottom:o.props("offsetTop")+o.props("offsetHeight")-window.scrollY,width:o.props("offsetWidth"),height:o.props("offsetHeight")}),o.scrollToTop=(e={scrollTop:0,duration:0})=>{let t,[r,s]=Object.keys(e),a=o[r],n=e[r]-a,i=+new Date,l=(e={currentTime:0,startVal:0,changeVal:0,animateDuration:0})=>{let{currentTime:t,startVal:r,changeVal:o,animateDuration:s}=e,a=t;return(a/=s/2)<1?o/2*a*a+r:-o/2*((a-=1)*(a-2)-1)+r};(t=()=>{let u=+new Date-i;o.scrollTop=Number(l({currentTime:u,startVal:a,changeVal:n,animateDuration:e[s]})),u<e[s]?requestAnimationFrame(t):o.scrollTop=e[r]})()},o.useWillMount=e=>{"object"==typeof o&&t.typeOf(o,"HTMLDocument")?o.listener("readystatechange",({target:t})=>"interactive"===t.readyState&&e.call(e,t)):t.console("error","UseWillMount hook just use when selector document.")},o.useMounted=e=>{"object"==typeof o&&t.typeOf(o,"HTMLDocument")?o.listener("readystatechange",({target:t})=>"complete"===t.readyState&&e.call(e,t)):t.console("error","UseMounted Hook just use when selector document.")},o};t.each=(e,t)=>e.forEach((e,r)=>t.call(t,e,r)),t.maps=(e,t)=>e.map((e,r)=>t.call(t,e,r)),t.filter=(e,t)=>e.filter(e=>t.call(t,e)),t.find=(e,t)=>e.find(e=>t.call(t,e)),t.sort=(e,t)=>e.sort((e,r)=>t.call(t,e,r)),t.indexOf=(e,t)=>e.indexOf(t),t.includes=(e,t)=>e.includes(t),t.findIndexOfObj=(e,t)=>e.findIndex(e=>t.call(t,e)),t.findObjProperty=(e,t)=>e.hasOwnProperty(t),t.sum=(e,t,r)=>r?e.reduce((e,r)=>t.call(t,e,r),r):e.reduce((e,r)=>t.call(t,e,r)),t.mergeArray=(e,t,r)=>r?e.concat(t):r.call(r,e.concat(t)),t.typeOf=(e,t)=>t?e.constructor.name===t:e.constructor.name,t.console=(e,...t)=>console[e](...t),t.localData=(e,r,o)=>"get"===e?t.convert(localStorage.getItem(r),"json")||[]:localStorage.setItem(r,t.convert(o,"stringify")),t.getNumberOfDecimal=(e,t)=>parseInt(e.toFixed(t)),t.createCustomEvent=(e,t)=>t?new CustomEvent(e,{detail:t}):new CustomEvent(e),t.registerCustomEvent=(e,t)=>window.addEventListener(e,t),t.useCustomEvent=e=>window.dispatchEvent(e),t.removeCustomEvent=(e,t)=>window.removeEventListener(e,t),t.createPromise=e=>new Promise((t,r)=>e.call(e,t,r)),t.createPromiseAll=(...e)=>Promise.all(e),t.createDomText=e=>document.createTextNode(e),t.objDetails=(e,r)=>r&&t.includes(["keys","values","entries"],r)?Object[r](e):t.console("error","please enter secode prameter 'keys' or 'values' or 'entries' in type string"),t.isObjectTheSame=(e,r)=>t.convert(e,"stringify")===t.convert(r,"stringify"),t.useBase64=(e,t)=>"encode"===e?btoa(t):atob(t),t.useSHA=async(e,t)=>{let r=await window.crypto.subtle.digest(e,new TextEncoder().encode(t));return Array.from(new Uint8Array(r)).map(e=>e.toString(16).padStart(2,"0")).join("")},t.useUnicode=(e,r)=>"encode"===r?t.createArray({type:"fake",item:{random:e.length}},t=>{let r=e.charCodeAt(t),o=r.toString(16);return r<15?`\\u000${o.toUpperCase()}`:r<255?`\\u00${o.toUpperCase()}`:r<4095?`\\u0${o.toUpperCase()}`:`\\u${o.toUpperCase()}`}).join(""):e.replace(/\\u(\d{4})/g,(e,t)=>String.fromCharCode(parseInt(t,16))),t.createArray=({type:e,item:r},o)=>{if("fake"===e){if("random"in r&&t.typeOf(r.random,"Number")&&void 0!==o&&t.typeOf(o,"Function"))return Array.from({length:r.random},(e,t)=>o.call(o,t));t.console("error","item property must have random in object and radom type must be number,with call back function in secode parameters.")}else if("new"===e&&!("random"in r))return Array.from(r)},t.convert=(e,r)=>{if(e&&r&&t.includes(["string","number","float","boolean","json","stringify"],r)){if(t.typeOf(e,"Object")&&t.includes(["string","number","float","boolean"],r)){t.console("error",`Convert value can't be object when use convert type ${r}.`);return}}else{t.console("error","Please enter first parameters value who want to convert and seconde paramters value is convert type 'string' or 'number' or 'float' or 'boolean' or 'json' or 'stringify'.");return}let o={string:String(e),number:parseInt(e),float:parseFloat(e),boolean:Boolean(e),json:"json"===r&&JSON.parse(e),stringify:"stringify"===r&&JSON.stringify(e)};return o[r]},t.createDom=(e,r)=>{let o=document.createElement(e),s=Object.entries(r);return t.each(s,e=>{let[r,s]=e;if(t.typeOf(s,"Object")){let[a,n]=e,[[i,l]]=Object.entries(n);o[a][i]=l}else o[r]=t.typeOf(s,"String")?s.trim():s}),o},t.currencyTranser=(e,r,o)=>{if(t.typeOf(e,"Number")){let s=o?{style:"currency",currency:r}:{};return new Intl.NumberFormat(r||"TWN",s).format(e)}t.console("error","First argument formatNumber type must use number.")},t.formatDateTime=(e={formatDate:"",formatType:""})=>{if(!(t.findObjProperty(e,"formatDate")||t.findObjProperty(e,"formatType"))){t.console("error","Please enter an object and use formatType property in the object.");return}if(t.findObjProperty(e,"customWeekItem")){if("Array"!==t.typeOf(e.customWeekItem)){t.console("error","customWeekItem property Must use array.");return}if(e.customWeekItem.length<=6||e.customWeekItem.length>7){t.console("error","customWeekItem property must put seven days name of week in array.");return}e.customWeekItem=[e.customWeekItem[e.customWeekItem.length-1],...e.customWeekItem].removeLast()}let r=(t.findObjProperty(e,"localCountryTime")?e.localCountryTime:8)*36e5,o=new Date((t.typeOf(e.formatDate,"Number")?e.formatDate:+new Date(e.formatDate))+r).toJSON(),s=o.replace(/T/g,"-").replace(/:/g,"-").replace(/\./g,"-").replace(/Z/g,"").split("-"),[a,n,i,l,u,c,p]=s,d=e?.toROCYear?(parseInt(a)-1911).toString():a;if(t.findObjProperty(e,"toDateFullNumber"))return t.convert(s.join(""),"number");if(e.formatType.match("tt")){let m=t.convert(l,"number")>11?"PM":"AM",y=t.convert(l,"number")-12<10?`0${t.convert(l,"number")-12}`:t.convert(t.convert(l,"number")-12,"string");return e.formatType.replace(/yyyy/g,d).replace(/MM/g,n).replace(/dd/g,i).replace(/HH/g,y).replace(/mm/g,u).replace(/ss/g,c).replace(/ms/g,p).replace(/tt/g,m)}return t.findObjProperty(e,"customWeekItem")?{fullDateTime:e.formatType.replace(/yyyy/g,d).replace(/MM/g,n).replace(/dd/g,i).replace(/HH/g,l).replace(/mm/g,u).replace(/ss/g,c).replace(/ms/g,p),getWeekName:e.customWeekItem[new Date(+new Date(e.formatDate)).getDay()]}:e.formatType.replace(/yyyy/g,d).replace(/MM/g,n).replace(/dd/g,i).replace(/HH/g,l).replace(/mm/g,u).replace(/ss/g,c).replace(/ms/g,p)};class r{static #a="";static #b={};static{this.fetchSetting=async(e,o)=>{let s={},{method:a,headers:n,contentType:i,useFormData:l,useXMLHttpRequest:u,returnType:c,data:p,routeParams:d,queryParams:m,timeout:y,beforePost:f,successFn:h,excuteDone:g,errorFn:b}=e;s.method=a,e.url=r.#a?`${r.#a}${e.url}`:e.url;let v=c||"json";if(a){if(!t.includes(["get","post","patch","put","delete"],a.toLocaleLowerCase())){t.console("error","Method value must use valid request method,like get、post ...");return}}else{t.console("error","Property name method is required in obejct parameters.");return}if(e.useFormData=!!l,d){let[T]=t.objDetails(d,"keys");e.url=`${e.url}/${d[T]}`}if(m){let j=t.maps(Object.entries(m),([e,t])=>`${e}=${t}`).join("&");e.url=`${e.url}?${j}`}if((t.objDetails(r.#b,"keys").length>0||n&&t.objDetails(n,"keys").length>0)&&(s.headers=t.objDetails(r.#b,"keys").length>0?r.#b:{"Content-Type":"application/json",...n}),p&&(l?s.body=this.convertFormData(p):(s.headers=t.objDetails(r.#b,"keys").length>0?r.#b:{"Content-Type":i||"application/json"},s.body=t.convert(p,"stringify"))),(t.objDetails(r.#b,"keys").length>0||n)&&p&&(s.headers=t.objDetails(r.#b,"keys").length>0?r.#b:{...n},s.body=l?this.convertFormData(p):t.convert(p,"stringify")),!o&&!u){if(f&&f.call(f),!h){t.console("error","Function Name successFn is required in obejct parameters.");return}if(!b){t.console("error","Function Name errorFn is required in obejct parameters.");return}}if(u){if(h){t.console("error","successFn not necessary parameters.");return}if(b){t.console("error","errorFn not necessary parameters.");return}return this.XMLHttpRequest({url:e.url,method:s.method,headers:s.headers,data:s.body})}let D=new AbortController;y&&setTimeout(()=>D.abort(),y);let w=await fetch(e.url,y?{...s,signal:D.signal}:s);if(o)return new Promise(async(e,t)=>{if(w.status>=200&&w.status<400){let r=await w[v]();e({bodyUsed:w.bodyUsed,headers:w.headers,ok:w.ok,redirected:w.redirected,status:w.status,statusText:w.statusText,type:w.type,url:w.url,data:r})}else t({bodyUsed:w.bodyUsed,headers:w.headers,ok:w.ok,redirected:w.redirected,status:w.status,statusText:w.statusText,type:w.type,url:w.url})});try{if(w.status>=200&&w.status<400){let F=await w[v]();h.call(h,{bodyUsed:w.bodyUsed,headers:w.headers,ok:w.ok,redirected:w.redirected,status:w.status,statusText:w.statusText,type:w.type,url:w.url,data:F}),g&&g.call(g)}else throw Error(JSON.stringify({bodyUsed:w.bodyUsed,headers:w.headers,ok:w.ok,redirected:w.redirected,status:w.status,statusText:w.statusText,type:w.type,url:w.url}))}catch(P){b.call(b,JSON.parse(P.message))}},this.XMLHttpRequest=e=>{let r=new XMLHttpRequest;return r.open(e.method,e.url,!0),e?.headers&&t.each(t.objDetails(e?.headers,"entries"),([e,t])=>r.setRequestHeader(e,t)),{xhrResponseResult(e){r.onreadystatechange=()=>{if(r.readyState===r.DONE&&r.status>=200&&r.status<=399)try{let o=JSON.parse(r.responseText);e.call(e,o)}catch(s){t.error("error",s)}r.status>=400&&t.error("error",r.statusText)}},xhrUploadProgress(e){r.upload.onprogress=t=>{if(t.lengthComputable){let r=100*t.loaded/t.total;e.call(e,r)}}},xhrRequestStart:()=>r.send(e?.data||void 0)}},this.convertFormData=e=>{let r=new FormData;return t.each(t.objDetails(e,"entries"),([e,t])=>r.append("uploadFile"===e?"FileList":e,t)),r},this.createBase=({baseUrl:e,baseHeaders:t})=>{r.#a=e,r.#b=t}}}class o extends r{static{this.get=async(e,t)=>await this.fetchSetting({method:"get",url:e,...t},!0),this.post=async(e,t)=>await this.fetchSetting({method:"post",url:e,...t},!0),this.patch=async(e,t)=>await this.fetchSetting({method:"patch",url:e,...t},!0),this.put=async(e,t)=>await this.fetchSetting({method:"put",url:e,...t},!0),this.delete=async(e,t)=>await this.fetchSetting({method:"delete",url:e,...t},!0)}}let s=(e={method:"",url:"",headers:{},contentType:"",useFormData:!1,useXMLHttpRequest:!1,returnType:"",routeParams:{},queryParams:{},data:{},beforePost:void 0,successFn:void 0,excuteDone:void 0,errorFn:void 0})=>r.fetchSetting(e,!1);return s.get=async(e,t={headers:{},returnType:"",useFormData:!1,useXMLHttpRequest:!1,routeParams:{},queryParams:{}})=>await o.get(e,t),s.post=async(e,t={headers:{},data:{},returnType:"",useFormData:!1,useXMLHttpRequest:!1,routeParams:{},queryParams:{}})=>await o.post(e,t),s.patch=async(e,t={headers:{},data:{},returnType:"",useFormData:!1,useXMLHttpRequest:!1,routeParams:{},queryParams:{}})=>await o.patch(e,t),s.put=async(e,t={headers:{},data:{},returnType:"",useFormData:!1,useXMLHttpRequest:!1,routeParams:{},queryParams:{}})=>await o.put(e,t),s.delete=async(e,t={headers:{},data:{},returnType:"",useFormData:!1,useXMLHttpRequest:!1,routeParams:{},queryParams:{}})=>await o.delete(e,t),s.createBase=(e={baseUrl:"",baseHeaders:{}})=>r.createBase(e),t.fetch=s,t})(e=>"object"==typeof e?e:document.querySelectorAll(e).length>1?document.querySelectorAll(e):document.querySelector(e));JSON.deepCopy=e=>$.convert($.convert(e,"stringify"),"json"),Math.toFixedNum=(e={value:""|0,toFloatPos:0})=>{if(!e||!$.findObjProperty(e,"value")||!$.findObjProperty(e,"toFloatPos")){$.console("error","Please use object and with key value pair. ex: { value:100.1,toFloatPos:1 }");return}if(!$.typeOf(e.toFloatPos,"Number")){$.console("error","toFloatPos key must use number.");return}return $.typeOf(e.value,"String")?Number(parseFloat(e.value).toFixed(e.toFloatPos)):Number(e.value.toFixed(e.toFloatPos))},String.prototype.appendText=function(e){return this.toString()+e},String.prototype.appendDirection=function(e,t,r){return this["left"===e?"padStart":"padEnd"](t,r)},String.prototype.range=function(e,t){return this.toString().slice(e,t)},String.prototype.format=function(e,...t){if($.typeOf(e,"String")&&$.includes(e,"{")&&$.includes(e,"}")){if(e.split("{").join("").split("}").length-1===t.length){let r=e,o=$.maps(t,(e,t)=>({replaceKey:`{${t}}`,replaceValue:e})),s=$.maps(o,({replaceKey:e,replaceValue:t})=>r=r.replace(e,t)).range(o.length-1,o.length).join("");return s}$.console("error","Can't not find else aguments.")}else $.console("error","First paramter must use type string,if use string must like this ex：abc {0} efg {1}.")},String.toChartCode=e=>$.createArray({type:"fake",item:{random:e.length}},t=>e.charCodeAt(t)),Date.prototype.calculateFullDateTime=function(e,t,r,o,s,a){let n=new Date(this);return e&&n.setFullYear(this.getFullYear()+e),t&&n.setMonth(this.getMonth()+t),r&&n.setDate(this.getDate()+r),o&&n.setHours(this.getHours()+o),s&&n.setMinutes(this.getMinutes()+s),a&&n.setSeconds(this.getSeconds()+a),n},Date.prototype.getLocalTimeZone=function(){return Math.abs(this.getTimezoneOffset()/60)},Date.prototype.toOptionTimeZoneForISO=function(e){return e?new Date(+this+36e5*e).toISOString():$.console("error","Lost one parameter in function.")},Date.formatCountingTime=function({formatTimesTemp:e,formatType:t}){let r=e=>e<10?`0${e}`:`${e}`,o=Math.abs(e),s=o/864e5,a=Math.floor(s),n=(s-a)*24,i=Math.floor(n),l=Math.floor((n-i)*60),u=Math.floor(((n-i)*60-l)*60);return t.replace(/dd/g,r(a)).replace(/HH/g,r(i)).replace(/mm/g,r(l)).replace(/ss/g,r(u))},Array.prototype.append=function(e){this.push(e)},Array.prototype.appendFirst=function(e){return this.unshift(e),this},Array.prototype.range=function(e,t){return this.slice(e,t)},Array.prototype.remove=function(e){return this.splice(e,1),this},Array.prototype.removeFirst=function(){return this.shift(),this},Array.prototype.removeLast=function(){return this.pop(),this},Map.prototype.append=function(e,t){this.set(e,t)},Map.prototype.getValue=function(e){return this.get(e)},Map.prototype.deleteKeyValue=function(e){return this.delete(e)},Map.prototype.removeAll=function(){this.clear()},Map.prototype.isKeyInMap=function(e){return this.has(e)},Map.prototype.toObject=function(){return Object.fromEntries(this)},Set.prototype.append=function(e){this.add(e)},Set.prototype.deleteValue=function(e){return this.delete(e)},Set.prototype.isValueInSet=function(e){return this.has(e)},Set.prototype.removeAll=function(){this.clear()},Set.prototype.toArray=function(){return[...this]},Object.prototype.toMap=function(e){return new Map(Object.entries(e))};