// CopyRight by Chen 2021/08 - 2022/05 Library language - javascript ver 1.4.5
// Work Environment Javascript ES6 or latest
"use strict";const $=(a=>{const b=c=>{const d=a.call(a,c)||c;return d.texts=a=>void 0===a?d.textContent:d.textContent=a,d.html=a=>void 0===a?d.innerHTML:d.innerHTML=a,d.addClass=a=>(d.classList.add(a),d),d.removeClass=a=>(d.classList.remove(a),d),d.toggleClass=a=>d.classList.toggle(a),d.on=(a,b)=>{d[["on",a].join("")]=()=>b.call(b,d)},d.listener=(a,b)=>d.addEventListener(a,b),d.removeListener=(a,b)=>d.removeEventListener(a,b),d.val=a=>void 0===a?d.value:d.value=a,d.attr=(a,b)=>void 0===b?d.getAttribute(a):d.setAttribute(a,b),d.props=(a,b)=>void 0===b?d[a]:d[a]=b,d.sibling=a=>b(d[a]),d.child=a=>b(d.children[a]),d.childFirst=()=>b(d.firstElementChild),d.childLast=()=>b(d.lastElementChild),d.parent=()=>b(d.parentNode),d.appendDom=a=>b(d).append(a),d.removeDom=()=>b(d).remove(),d.removeChildDom=()=>b(d).replaceChildren(),d.appendDomText=a=>b(d).appendChild(a),d.easyAppendDom=(a,c)=>b(d).insertAdjacentHTML("afterDom"===a?"beforeend":"afterbegin",c),d.styles=(a,c,e)=>b.includes(["set","remove"],a)?("set"===a?d.style.setProperty(c,e):d.style.removeProperty(c),d):void b.console("error","First parameter method must use string and keyword is 'set' or 'remove'."),d.getDomStyles=a=>{let c={};return"object"==typeof a?0===a.length?void b.console("error","Parameter must use array,and css property must in array with string."):(b.each(a,a=>c[a]=getComputedStyle(b(d)).getPropertyValue(a)),c):void b.console("error","Parameter must use array.")},d.getDomPos=()=>({x:b(d).props("offsetLeft"),y:b(d).props("offsetTop")-window.scrollY,top:b(d).props("offsetTop")-window.scrollY,left:b(d).props("offsetLeft"),right:b(d).props("offsetLeft")+b(d).props("offsetWidth"),bottom:b(d).props("offsetTop")+b(d).props("offsetHeight")-window.scrollY,width:b(d).props("offsetWidth"),height:b(d).props("offsetHeight")}),d.scrollToTop=(a={scrollTop:0,duration:0})=>{let b;const[c,e]=Object.keys(a),f=d[c],g=a[c]-f,h=+new Date,i=(a={currentTime:0,startVal:0,changeVal:0,animateDuration:0})=>{let{currentTime:b,startVal:c,changeVal:d,animateDuration:e}=a,f=b;return(f/=e/2,1>f)?d/2*f*f+c:(f-=1,-d/2*(f*(f-2)-1)+c)};(b=()=>{const j=+new Date-h;d.scrollTop=+i({currentTime:j,startVal:f,changeVal:g,animateDuration:a[e]}),j<a[e]?requestAnimationFrame(b):d.scrollTop=a[c]})()},d.useWillMount=a=>{"object"==typeof d?b.typeOf(d,"HTMLDocument")?b(d).listener("readystatechange",({target:b})=>"interactive"===b.readyState&&a.call(a,b)):b.console("error","UseWillMount hook just use when selector document."):b.console("error","UseWillMount hook just use when selector document.")},d.useMounted=a=>{"object"==typeof d?b.typeOf(d,"HTMLDocument")?b(d).listener("readystatechange",({target:b})=>"complete"===b.readyState&&a.call(a,b)):b.console("error","UseMounted Hook just use when selector document."):b.console("error","UseMounted Hook just use when selector document.")},d};b.each=(a,b)=>a.forEach((c,d)=>b.call(a,c,d)),b.maps=(a,b)=>a.map((c,d)=>b.call(a,c,d)),b.filter=(a,b)=>a.filter(c=>b.call(a,c)),b.find=(a,b)=>a.find(a=>b.call(a,items)),b.reduce=(c,d)=>c.reduce((e,a)=>d.call(c,e,a)),b.sort=(c,d)=>c.sort((e,a)=>d.call(c,e,a)),b.indexOf=(a,b)=>a.indexOf(b),b.includes=(a,b)=>a.includes(b),b.findIndexOfObj=(a,b)=>a.findIndex(c=>b.call(a,c)),b.findObjProperty=(a,b)=>b in a,b.sum=(c,d)=>c.reduce((e,a)=>d.call(c,e,a)),b.mergeArray=(a,b,c)=>void 0===c?a.concat(b):c.call(c,a.concat(b)),b.typeOf=(a,b)=>void 0===b?a.constructor.name:a.constructor.name===b,b.console=(a,...b)=>console[a](...b),b.localData=(a,c,d)=>"get"===a?b.convert(localStorage.getItem(c),"json")||[]:localStorage.setItem(c,b.convert(d,"stringify")),b.createArray=({type:a,item:c},d)=>{if("fake"===a){if("random"in c&&b.typeOf(c.random,"Number")&&void 0!==d&&b.typeOf(d,"Function"))return Array.from({length:c.random},(a,b)=>d.call(d,b));b.console("error","item property must have random in object and radom type must be number,with call back function in secode parameters.")}else if("new"===a&&!("random"in c))return Array.from(c)},b.convert=(a,c)=>{if(void 0===a||void 0===c||!b.includes(["string","number","float","boolean","json","stringify"],c))return void b.console("error","Please enter first parameters value who want to convert and seconde paramters value is convert type 'string' or 'number' or 'float' or 'boolean' or 'json' or 'stringify'.");if("object"==typeof a&&b.includes(["string","number","float","boolean"],c))return void b.console("error",`Convert value can't be object when use convert type ${c}.`);const d={string:a+"",number:parseInt(a),float:parseFloat(a),boolean:!!a,json:"json"===c&&JSON.parse(a),stringify:"stringify"===c&&JSON.stringify(a)};return d[c]},b.createDom=(a,c)=>{const d=document.createElement(a),e=Object.entries(c);return b.each(e,a=>{const[c,e]=a;if(b.typeOf(e,"Object")){const[b,c]=a,[[e,f]]=Object.entries(c);d[b][e]=f}else d[c]=b.typeOf(e,"String")?e.trim():e}),d},b.createDomText=a=>document.createTextNode(a),b.objDetails=(a,c)=>void 0!==c&&b.includes(["keys","values","entries"],c)?Object[c](a):b.console("error","please enter secode prameter 'keys' or 'values' or 'entries' in type string"),b.objManager=(a,c,d,e)=>{const f=()=>void 0===a?"Please put want to manage's object at first parameters":void 0!==c&&b.includes(["get","set","add","delete"],c)?"string"==typeof c?void 0===d?"Please enter want to use key name at third parameters":"string"==typeof d?void 0===e?`Please enter want to set value at forth parameters.`:void 0:"Third parameters must use type string.":"Seconde parameters must use type string.":"Please enter want to use methods \"get\u3001set\u3001add\u3001delete\" at seconde parameters";switch(c){case"get":return a;case"set":void 0===f()?d in a?a[d]=e:b.console("error",`Key name ${d} not in this object.`):b.console("error",f());break;case"add":void 0===f()?d in a?b.console("error",`Key name ${d} already in this object`):a[d]=e:b.console("error",f());break;case"delete":void 0===f()?d in a?delete a[d]:b.console("error",`Key name ${d} not in this object.`):b.console("error",f());}},b.formatDateTime=(a={formatDate:"",formatType:""})=>{if(!("formatDate"in a||"formatType"in a))return void b.console("error","Please enter an object and use formatType property in the object.");const c=1e3*(60*(60*("localCountryTime"in a?a.localCountryTime:8))),d=new Date(+new Date(a.formatDate)+c).toJSON(),e=d.replace(/T/g,"-").replace(/:/g,"-").split(".")[0].split("-"),[f,g,h,i,j,k]=e;if("toDateFullNumber"in a)return+e.join("");if(a.formatType.match("tt")){const c=11<b.convert(i,"number")?"PM":"AM",d=10>b.convert(i,"number")-12?`0${b.convert(i,"number")-12}`:b.convert(b.convert(i,"number")-12,"string");return a.formatType.replace(/yyyy/g,f).replace(/MM/g,g).replace(/dd/g,h).replace(/HH/g,d).replace(/mm/g,j).replace(/ss/g,k).replace(/tt/g,c)}return a.formatType.replace(/yyyy/g,f).replace(/MM/g,g).replace(/dd/g,h).replace(/HH/g,i).replace(/mm/g,j).replace(/ss/g,k)};class c{constructor(){this.baseUrl="",this.baseHeaders={}}static async fetchSetting(a,c){const d={},{method:e,headers:f,contentType:g,data:h,routeParams:i,beforePost:j,successFn:k,excuteDone:l,errorFn:m}=a;if(d.method=e,a.url=this.baseUrl?`${this.baseUrl}${a.url}`:a.url,i){const[b]=Object.keys(i);a.url=`${a.url}/${i[b]}`}if((this.baseHeaders||f)&&(d.headers=this.baseHeaders||f),h&&(d.headers=this.baseHeaders||{"Content-Type":g},d.body=b.convert(h,"stringify")),(this.baseHeaders||f)&&h&&(d.headers=this.baseHeaders||{...f},d.body=b.convert(h,"stringify")),!c){if(j&&j.call(j),!k)return void b.console("error","Function Name successFn is required in obejct parameters.");if(!m)return void b.console("error","Function Name errorFn is required in obejct parameters.")}const n=await fetch(a.url,d).then(a=>a);if(c)return new Promise((a,b)=>{200<=n.status&&300>n.status?n.json().then(b=>a({bodyUsed:n.bodyUsed,headers:n.headers,ok:n.ok,redirected:n.redirected,status:n.status,statusText:n.statusText,type:n.type,url:n.url,data:b})):b({bodyUsed:n.bodyUsed,headers:n.headers,ok:n.ok,redirected:n.redirected,status:n.status,statusText:n.statusText,type:n.type,url:n.url})});try{if(200<=n.status&&300>n.status)n.json().then(a=>k.call(k,{bodyUsed:n.bodyUsed,headers:n.headers,ok:n.ok,redirected:n.redirected,status:n.status,statusText:n.statusText,type:n.type,url:n.url,data:a})).then(()=>l&&l.call(l));else throw new Error(JSON.stringify({bodyUsed:n.bodyUsed,headers:n.headers,ok:n.ok,redirected:n.redirected,status:n.status,statusText:n.statusText,type:n.type,url:n.url}))}catch(a){m.call(m,JSON.parse(a.message))}}static createBase({baseUrl:a,baseHeaders:b}){this.baseUrl=a,this.baseHeaders=b}}class d extends c{static get(a,b){return this.fetchSetting({method:"get",url:a,...b},!0)}static post(a,b){return this.fetchSetting({method:"post",url:a,...b},!0)}static patch(a,b){return this.fetchSetting({method:"patch",url:a,...b},!0)}static put(a,b){return this.fetchSetting({method:"put",url:a,...b},!0)}static delete(a,b){return this.fetchSetting({method:"delete",url:a,...b},!0)}}return b.fetch=(a={method:"",url:"",headers:{},contentType:"",data:{},beforePost:void 0,successFn:void 0,excuteDone:void 0,errorFn:void 0})=>c.fetchSetting(a,!1),b.fetch.get=(a,b={headers:{}})=>d.get(a,b),b.fetch.post=(a,b={headers:{},data:{}})=>d.post(a,b),b.fetch.patch=(a,b={headers:{},data:{}})=>d.patch(a,b),b.fetch.put=(a,b={headers:{},data:{}})=>d.put(a,b),b.fetch.delete=(a,b={headers:{},data:{}})=>d.delete(a,b),b.fetch.createBase=(a={baseUrl:"",baseHeaders:{}})=>c.createBase(a),b})(a=>"object"==typeof a?a:1<document.querySelectorAll(a).length?document.querySelectorAll(a):document.querySelector(a));Date.prototype.calculateDay=function(a){if(void 0===a||!("day"in a&&"method"in a))return void $.console("error","Please enter an object and use day and method property in the object.");if("number"!=typeof a.day)return void $.console("error","day property must use type number.");if(!$.includes(["addDay","reduceDay"],a.method))return void $.console("error","Please enter method type 'addDay' or 'reduceDay'.");const b={addDay:new Date(+this+1e3*(60*(60*(24*a.day)))),reduceDay:new Date(+this-1e3*(60*(60*(24*a.day))))};return b[a.method]},Date.prototype.toOptionTimeZoneForISO=function(a){return new Date(+this+1e3*(60*(60*(a===void 0?8:a)))).toISOString()},Array.prototype.append=function(a){this.push(a)},Array.prototype.appendFirst=function(...a){return this.unshift(...a),this},Array.prototype.range=function(a,b){return this.slice(a,b)},Array.prototype.remove=function(a){return this.splice(a,1),this},Array.prototype.removeFirst=function(){return this.shift(),this},Array.prototype.removeLast=function(){return this.pop(),this};