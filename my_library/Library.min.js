// CopyRight by Chen 2021/08 - 2022/07 Library language - javascript ver 1.4.9
// Work Environment Javascript ES6 or latest
"use strict";const $=(b=>{let $=c=>{let a=b.call(b,c)||c;return a.texts=b=>b?a.textContent=b:a.textContent,a.html=b=>b?a.innerHTML=b:a.innerHTML,a.addClass=b=>(a.classList.add(b),a),a.removeClass=b=>(a.classList.remove(b),a),a.toggleClass=b=>a.classList.toggle(b),a.on=(b,c)=>{a[["on",b].join("")]=()=>c.call(c,a)},a.listener=(b,c)=>a.addEventListener(b,c),a.removeListener=(b,c)=>a.removeEventListener(b,c),a.val=b=>b?a.value=b:a.value,a.attr=(b,c)=>c?a.setAttribute(b,c):a.getAttribute(b),a.props=(b,c)=>c?a[b]=c:a[b],a.sibling=b=>a[b],a.child=b=>a.children[b],a.childFirst=()=>a.firstElementChild,a.childLast=()=>a.lastElementChild,a.parent=()=>a.parentNode,a.appendDom=b=>a.append(b),a.removeDom=()=>a.remove(),a.removeChildDom=()=>a.replaceChildren(),a.appendDomText=b=>a.appendChild(b),a.easyAppendDom=(b,c)=>a.insertAdjacentHTML("afterDom"!==b?"afterbegin":"beforeend",c),a.styles=(b,c,d)=>{if(!$.includes(["set","remove"],b)){$.console("error","First parameter method must use string and keyword is 'set' or 'remove'.");return}return"set"===b?a.style.setProperty(c,d):a.style.removeProperty(c),a},a.getDomStyles=b=>{let c={};if("object"!=typeof b){$.console("error","Parameter must use array.");return}if(0!==b.length)return $.each(b,b=>c[b]=getComputedStyle(a).getPropertyValue(b)),c;$.console("error","Parameter must use array,and css property must in array with string.")},a.getDomPos=()=>({x:a.props("offsetLeft"),y:a.props("offsetTop")-window.scrollY,top:a.props("offsetTop")-window.scrollY,left:a.props("offsetLeft"),right:a.props("offsetLeft")+a.props("offsetWidth"),bottom:a.props("offsetTop")+a.props("offsetHeight")-window.scrollY,width:a.props("offsetWidth"),height:a.props("offsetHeight")}),a.scrollToTop=(b={scrollTop:0,duration:0})=>{let d,[c,f]=Object.keys(b),e=a[c],g=b[c]-e,h=+new Date,i=(d={currentTime:0,startVal:0,changeVal:0,animateDuration:0})=>{let{currentTime:e,startVal:b,changeVal:c,animateDuration:f}=d,a=e;return(a/=f/2)<1?c/2*a*a+b:-c/2*((a-=1)*(a-2)-1)+b};(d=()=>{let j=+new Date-h;a.scrollTop=Number(i({currentTime:j,startVal:e,changeVal:g,animateDuration:b[f]})),j<b[f]?requestAnimationFrame(d):a.scrollTop=b[c]})()},a.useWillMount=b=>{"object"==typeof a&&$.typeOf(a,"HTMLDocument")?a.listener("readystatechange",({target:a})=>"interactive"===a.readyState&&b.call(b,a)):$.console("error","UseWillMount hook just use when selector document.")},a.useMounted=b=>{"object"==typeof a&&$.typeOf(a,"HTMLDocument")?a.listener("readystatechange",({target:a})=>"complete"===a.readyState&&b.call(b,a)):$.console("error","UseMounted Hook just use when selector document.")},a};$.each=(a,b)=>a.forEach((a,c)=>b.call(b,a,c)),$.maps=(a,b)=>a.map((a,c)=>b.call(b,a,c)),$.filter=(a,b)=>a.filter(a=>b.call(b,a)),$.find=(a,b)=>a.find(a=>b.call(b,a)),$.sort=(a,b)=>a.sort((a,c)=>b.call(b,a,c)),$.indexOf=(a,b)=>a.indexOf(b),$.includes=(a,b)=>a.includes(b),$.findIndexOfObj=(a,b)=>a.findIndex(a=>b.call(b,a)),$.findObjProperty=(a,b)=>a.hasOwnProperty(b),$.sum=(a,c,b)=>b?a.reduce((a,b)=>c.call(c,a,b),b):a.reduce((a,b)=>c.call(c,a,b)),$.mergeArray=(b,c,a)=>a?b.concat(c):a.call(a,b.concat(c)),$.typeOf=(a,b)=>b?a.constructor.name===b:a.constructor.name,$.console=(a,...b)=>console[a](...b),$.localData=(b,a,c)=>"get"===b?$.convert(localStorage.getItem(a),"json")||[]:localStorage.setItem(a,$.convert(c,"stringify")),$.createCustomEvent=(a,b)=>b?new CustomEvent(a,{detail:b}):new CustomEvent(a),$.registerCustomEvent=(a,b)=>window.addEventListener(a,b),$.useCustomEvent=a=>window.dispatchEvent(a),$.removeCustomEvent=(a,b)=>window.removeEventListener(a,b),$.createArray=({type:b,item:a},c)=>{if("fake"===b){if("random"in a&&$.typeOf(a.random,"Number")&& void 0!==c&&$.typeOf(c,"Function"))return Array.from({length:a.random},(_,a)=>c.call(c,a));$.console("error","item property must have random in object and radom type must be number,with call back function in secode parameters.")}else if("new"===b&&!("random"in a))return Array.from(a)},$.convert=(a,b)=>{if(void 0!==a&& void 0!==b&&$.includes(["string","number","float","boolean","json","stringify"],b)){if("object"==typeof a&&$.includes(["string","number","float","boolean"],b)){$.console("error",`Convert value can't be object when use convert type ${b}.`);return}}else{$.console("error","Please enter first parameters value who want to convert and seconde paramters value is convert type 'string' or 'number' or 'float' or 'boolean' or 'json' or 'stringify'.");return}let c={string:String(a),number:parseInt(a),float:parseFloat(a),boolean:Boolean(a),json:"json"===b&&JSON.parse(a),stringify:"stringify"===b&&JSON.stringify(a)};return c[b]},$.createDom=(a,b)=>{let c=document.createElement(a),d=Object.entries(b);return $.each(d,b=>{let[d,a]=b;if($.typeOf(a,"Object")){let[e,f]=b,[[g,h]]=Object.entries(f);c[e][g]=h}else c[d]=$.typeOf(a,"String")?a.trim():a}),c},$.createDomText=a=>document.createTextNode(a),$.objDetails=(b,a)=>void 0!==a&&$.includes(["keys","values","entries"],a)?Object[a](b):$.console("error","please enter secode prameter 'keys' or 'values' or 'entries' in type string"),$.currencyTranser=(a,b)=>{if(void 0!==a){let c=""===a?{}:{style:"currency",currency:a};return new Intl.NumberFormat(""===a?"TWN":a,c).format(b)}$.console("error","First argument currency type is must.")},$.formatDateTime=(a={formatDate:"",formatType:""})=>{if(!("formatDate"in a||"formatType"in a)){$.console("error","Please enter an object and use formatType property in the object.");return}let i=("localCountryTime"in a?a.localCountryTime:8)*36e5,j=new Date(+new Date(a.formatDate)+i).toJSON(),c=j.replace(/T/g,"-").replace(/:/g,"-").split(".")[0].split("-"),[d,e,f,b,g,h]=c;if("toDateFullNumber"in a)return Number(c.join(""));if(!a.formatType.match("tt"))return a.formatType.replace(/yyyy/g,d).replace(/MM/g,e).replace(/dd/g,f).replace(/HH/g,b).replace(/mm/g,g).replace(/ss/g,h);{let k=$.convert(b,"number")>11?"PM":"AM",l=$.convert(b,"number")-12<10?`0${$.convert(b,"number")-12}`:$.convert($.convert(b,"number")-12,"string");return a.formatType.replace(/yyyy/g,d).replace(/MM/g,e).replace(/dd/g,f).replace(/HH/g,l).replace(/mm/g,g).replace(/ss/g,h).replace(/tt/g,k)}};class a{static #a="";static #b={};static{this.fetchSetting=async(d,k)=>{let c={},{method:g,headers:e,contentType:l,data:f,routeParams:h,beforePost:i,successFn:m,excuteDone:p,errorFn:j}=d;if(c.method=g,d.url=a.#a?`${a.#a}${d.url}`:d.url,g){if(!$.includes(["get","post","patch","put","delete"],g.toLocaleLowerCase())){$.console("error","Method value must use valid request method,like get\u3001post ...");return}}else{$.console("error","Property name method is required in obejct parameters.");return}if(h){let[n]=Object.keys(h);d.url=`${d.url}/${h[n]}`}if((Object.keys(a.#b).length>0||e)&&(c.headers=Object.keys(a.#b).length>0?a.#b:{"Content-Type":"application/json",...e}),e||(c.headers={"Content-Type":l||"application/json"}),f&&(c.headers=a.#b||{"Content-Type":l||"application/json"},c.body=$.convert(f,"stringify")),(a.#b||e)&&f&&(c.headers=a.#b||{...e},c.body=$.convert(f,"stringify")),!k){if(i&&i.call(i),!m){$.console("error","Function Name successFn is required in obejct parameters.");return}if(!j){$.console("error","Function Name errorFn is required in obejct parameters.");return}}let b=await fetch(d.url,c).then(a=>a);if(k)return new Promise((d,a)=>{b.status>=200&&b.status<300?b[c.headers["Content-Type"].split("/")[1]]().then(a=>d({bodyUsed:b.bodyUsed,headers:b.headers,ok:b.ok,redirected:b.redirected,status:b.status,statusText:b.statusText,type:b.type,url:b.url,data:a})):a({bodyUsed:b.bodyUsed,headers:b.headers,ok:b.ok,redirected:b.redirected,status:b.status,statusText:b.statusText,type:b.type,url:b.url})});try{if(b.status>=200&&b.status<300)b[c.headers["Content-Type"].split("/")[1]]().then(a=>m.call(m,{bodyUsed:b.bodyUsed,headers:b.headers,ok:b.ok,redirected:b.redirected,status:b.status,statusText:b.statusText,type:b.type,url:b.url,data:a})).then(()=>p&&p.call(p));else throw new Error(JSON.stringify({bodyUsed:b.bodyUsed,headers:b.headers,ok:b.ok,redirected:b.redirected,status:b.status,statusText:b.statusText,type:b.type,url:b.url}))}catch(o){j.call(j,JSON.parse(o.message))}},this.createBase=({baseUrl:b,baseHeaders:c})=>{a.#a=b,a.#b=c}}}class c extends a{static{this.get=(a,b)=>this.fetchSetting({method:"get",url:a,...b},!0),this.post=(a,b)=>this.fetchSetting({method:"post",url:a,...b},!0),this.patch=(a,b)=>this.fetchSetting({method:"patch",url:a,...b},!0),this.put=(a,b)=>this.fetchSetting({method:"put",url:a,...b},!0),this.delete=(a,b)=>this.fetchSetting({method:"delete",url:a,...b},!0)}}return $.fetch=(b={method:"",url:"",headers:{},contentType:"",data:{},beforePost:void 0,successFn:void 0,excuteDone:void 0,errorFn:void 0})=>a.fetchSetting(b,!1),$.fetch.get=(a,b={headers:{}})=>c.get(a,b),$.fetch.post=(a,b={headers:{},data:{}})=>c.post(a,b),$.fetch.patch=(a,b={headers:{},data:{}})=>c.patch(a,b),$.fetch.put=(a,b={headers:{},data:{}})=>c.put(a,b),$.fetch.delete=(a,b={headers:{},data:{}})=>c.delete(a,b),$.fetch.createBase=(b={baseUrl:"",baseHeaders:{}})=>a.createBase(b),$})(a=>"object"==typeof a?a:document.querySelectorAll(a).length>1?document.querySelectorAll(a):document.querySelector(a));String.prototype.appendText=function(a){return this.toString()+a},String.prototype.format=function(a,...c){if($.typeOf(a,"String")&&$.includes(a,"{")&&$.includes(a,"}")){if(a.split("{").join("").split("}").length-1===c.length){let e=a,b=$.maps(c,(a,b)=>({replaceKey:`{${b}}`,replaceValue:a})),d=$.maps(b,({replaceKey:a,replaceValue:b})=>e=e.replace(a,b)).slice(b.length-1,b.length).join("");return d}$.console("error","Can't not find else aguments.")}else $.console("error","First paramter must use type string,if use string must like this ex\uFF1Aabc {0} efg {1}.")},Date.prototype.calculateDay=function(a){if(void 0!==a&&"day"in a&&"method"in a){if("number"!=typeof a.day){$.console("error","day property must use type number.");return}if(!$.includes(["addDay","reduceDay"],a.method)){$.console("error","Please enter method type 'addDay' or 'reduceDay'.");return}}else{$.console("error","Please enter an object and use day and method property in the object.");return}let b={addDay:new Date(+this+864e5*a.day),reduceDay:new Date(+this-864e5*a.day)};return b[a.method]},Date.prototype.toOptionTimeZoneForISO=function(a){return new Date(+this+(void 0===a?8:a)*36e5).toISOString()},Array.prototype.append=function(a){this.push(a)},Array.prototype.appendFirst=function(...a){return this.unshift(...a),this},Array.prototype.range=function(a,b){return this.slice(a,b)},Array.prototype.remove=function(a){return this.splice(a,1),this},Array.prototype.removeFirst=function(){return this.shift(),this},Array.prototype.removeLast=function(){return this.pop(),this}